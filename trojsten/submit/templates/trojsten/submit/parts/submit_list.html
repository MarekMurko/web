{% load utils %}
{% load submit_parts %}
{% load i18n %}

{% if task.has_description or task.has_source or task.has_testablezip %}
{% comment %}Translators: original: Odovzdané súbory{% endcomment %}
<h2>{% trans "Submitted files" %}</h2>
{% endif %}
{% if task.has_description %}
    {% comment %}Translators: original: Popis{% endcomment %}
    <h3>{% trans "Description" %}</h3>
    <table class="table table-hover">
        <thead>
            <tr>
                {% comment %}Translators: original: Čas{% endcomment %}
                <th>{% trans "Time" %}</th>
                {% comment %}Translators: original: Stav{% endcomment %}
                <th>{% trans "Status" %}</th>
                {% comment %}Translators: original: Body{% endcomment %}
                <th>{% trans "Points" %}</th>
            </tr>
        </thead>
        <tbody>
        {% for submit in submits|lookup:Submit.DESCRIPTION %}
            {% if submit.testing_status == IN_QUEUE %}
            <tr>
            {% else %}
            <tr class="success">
            {% endif %}
                <td><a href="{% url 'view_submit' submit_id=submit.id %}">{{ submit.time }}</a></td>
                {% if submit.testing_status == IN_QUEUE %}
                {% comment %}Translators: original: Neopravené{% endcomment %}
                <td>{% trans "Unreviewed" %}</td>
                <td>..</td>
                {% else %}
                {% comment %}Translators: original: Opravené{% endcomment %}
                <td>{% trans "Reviewed" %}</td>
                <td>{{ submit.points }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
{% if task.has_source or task.has_testablezip %}
    {% if task.has_source %}
        {% comment %}Translators: original: Kód{% endcomment %}
        <h3>{% trans "Code" %}</h3>
    {% else %}
        <h3>Zip</h3>
    {% endif %}
    <table class="table table-hover">
        <thead>
            <tr>
                {% comment %}Translators: original: Čas{% endcomment %}
                <th>{% trans "Time" %}</th>
                {% comment %}Translators: original: Stav{% endcomment %}
                <th>{% trans "Status" %}</th>
                {% comment %}Translators: original: Správa z testovača{% endcomment %}
                <th>{% trans "Message from online judge" %}</th>
                {% comment %}Translators: original: Body{% endcomment %}
                <th>{% trans "Points" %}</th>
            </tr>
        </thead>
        <tbody>
        {% if task.has_source %}
        {% for submit in submits|lookup:Submit.SOURCE %}
        <tr class="{{ submit|submitclass }}" data-id="{{ submit.id }}">
                <td><a href="{% url 'view_submit' submit_id=submit.id %}">{{ submit.time }}</a></td>
                {% if submit.testing_status == IN_QUEUE %}
                <td>
                    <span class="glyphicon glyphicon-refresh glyphicon-animate-rotate"></span>
                    {% comment %}Translators: original: Testuje sa{% endcomment %}
                    {% trans "Testing" %}
                </td>
                <td>
                    {% comment %}Translators: original: Čaká sa na otestovanie{% endcomment %}
                    {% trans "Waiting for testing" %}
                </td>
                <td>..</td>
                {% else %}
                <td>
                    {% comment %}Translators: original: Dotestované{% endcomment %}
                    {% trans "Tested" %}
                </td>
                <td>{{ submit.tester_response_verbose }}</td>
                <td>{{ submit.points }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        {% endif %}
        {% if task.has_testablezip %}
        {% for submit in submits|lookup:Submit.TESTABLE_ZIP %}
            <tr class="{{ submit|submitclass }}" data-id="{{ submit.id }}">
                <td><a href="{% url 'view_submit' submit_id=submit.id %}">{{ submit.time }}</a></td>
                {% if submit.testing_status == IN_QUEUE %}
                <td>
                    {% comment %}Translators: original: Testuje sa{% endcomment %}
                    {% trans "Testing" %}
                </td>
                <td>
                    {% comment %}Translators: original: Čaká sa na otestovanie{% endcomment %}
                    {% trans "Waiting for testing" %}
                </td>
                <td>..</td>
                {% else %}
                <td>
                    {% comment %}Translators: original: Dotestované{% endcomment %}
                    {% trans "Tested" %}
                </td>
                <td>{{ submit.tester_response_verbose }}</td>
                <td>{{ submit.points }}</td>
                {% endif %}
            </tr>
        {% endfor %}
        {% endif %}

        </tbody>
    </table>
{% endif %}
