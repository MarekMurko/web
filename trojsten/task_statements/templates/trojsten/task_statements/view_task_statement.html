{% extends "trojsten/layout/main.html" %}
{% load submit_parts %}
{% load statements_parts %}
{% load staticfiles %}
{% load utils %}
{% load i18n %}

{% block stylesheets %}
{{ block.super }}
<link rel="stylesheet" href="{% static "css/syntax_highlight.css" %}" type="text/css" />
{% endblock %}

{% block title %}{{ task.number }}. {{ task.name }}{% endblock %}

{% block page_header %}
<ul class="nav nav-pills">
  <li class="pull-left" id="article-title-li">
    <h1 id="article-title" class="task-name">{{ task.number }}. {{ task.name }}
        <small>
        {% for category in task.category.all %}
            <span class="label label-default category-{{ category }}">{{ category }}</span>
        {% endfor %}
        {% if not task.round.visible %}
            <span class="label label-danger">
                {% comment %}Translators: original: skryté{% endcomment %}
                {% trans "hidden" %}
            </span>
        {% endif %}
        </small>
    </h1>
  </li>
  <li class="pull-right">
    <a href="{% url 'task_list' round_id=task.round.id %}">
        <span class="glyphicon glyphicon-list"></span>
        {% comment %}Translators: original: Všetky úlohy{% endcomment %}
        {% trans "All tasks" as tasks %}
    </a>
  </li>
  {% is_organizer competition=task.round.series.competition as is_organizer %}
  {% if is_organizer %}
      <li class="pull-right">
        <a href="{% url 'admin:review_task' task_pk=task.id %}">
            <span class="glyphicon glyphicon-check"></span>
            {% comment %}Translators: original: Opravovanie{% endcomment %}
            {% trans "Review" %}
        </a>
      </li>
  {% endif %}
</ul>
{% endblock %}

{% block page_content %}
    {% show_progress task.round %}
    {% if task.description_points > 0 or task.source_points > 0 %}
    <div class="well pull-right task-points">
        {% comment %}Translators: original: Počet bodov{% endcomment %}
        {% trans "Points" as text_points %}
        <strong>{{ text_points }}</strong>


        {% if task.description_points > 0 %}
            <div class="points-item points-item-description">
                {% comment %}Translators: original: Popis{% endcomment %}
                {% trans "Description" %}:&nbsp; <span class="badge pull-right">{{ task.description_points }}{{ text_points.0|upper }}</span>
            </div>
        {% endif %}
        {% if task.source_points > 0 %}
            <div class="points-item points-item-description">
                {% comment %}Translators: original: Program{% endcomment %}
                {% trans "Program" %}:&nbsp; <span class="badge pull-right">{{ task.source_points }}{{ text_points.0|upper }}</span>
            </div>
        {% endif %}
    </div>
    {% endif %}
    <div class="task-statement">
        {% if task.task_file_exists %}
            {% ssi path %}
        {% else %}
            {% comment %}Translators: original: HTML zadanie nie je k dispozícii.{% endcomment %}
            <p class="lead">{% trans "Problem statement in HTML is not available." %}</p>
        {% endif %}
    </div>
    <div class="task-submit">
    {% if task.get_submit_types|length > 0 %}
        {% comment %}Translators: original: Odovzdávanie{% endcomment %}
        <h2>{% trans "Submit" %}</h2>

        {% if request.user.is_authenticated %}
        {% if not task.round.can_submit %}
        <div class="alert alert-warning" role="alert">
            {% comment %}Translators: original: Séria už skončila. Ďalšie submity sa už nerátajú do výsledkovky.{% endcomment %}
            {% trans "Round has ended. Further submits do not count to standings." %}
        </div>
        {% endif %}
        {% show_submit_form task request.path %}
        {% show_submit_list task request.user %}
        {% else %}
            {% comment %}Translators: original: Na odovzdávanie sa musíš prihlásiť{% endcomment %}
            <p class="text-danger">{% trans "You have to be logged in to submit the solution." %}</p>
        {% endif %}
    {% else %}
        {% comment %}Translators: original: Tento príklad momentálne nemá možnosť odovzdávania.{% endcomment %}
        <p class="text-danger">{% trans "You can not submit your solution for this task yet." %}</p>
    {% endif %}
    </div>

    {% comment %}Translators: original: Otázky a diskusia{% endcomment %}
    <h2>{% trans "Questions and discussions" %}</h2>
    <p>
        {% comment %}Translators: original: Po skončení série budete mať príležitosť na diskutovanie o riešeniach v diskusii pod vzorovým riešením.{% endcomment %}
        {% trans "When the round ends, you will have the opportunity to discuss your solutions under solutions." %}
    </p>
{% endblock %}
